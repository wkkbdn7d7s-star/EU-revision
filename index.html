<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EUreka! ‚Äî Welcome</title>

  <!-- PWA Essentials -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#003399">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="eci-icon.png" />
  <link rel="apple-touch-icon" href="eci-icon.png" />

  <style>
    :root {
      --blue-dark: #1b1f3b;
      --blue-main: #003399;
      --blue-light: #e9f0ff;
      --gold: #d4af7f;
      --text-dark: #2c2a28;
      --text-light: #f0f0f0;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: #f8f5ef;
      margin: 0;
      padding: 0;
      color: var(--text-dark);
    }

    /* ---- HEADER ---- */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 32px;
      background: linear-gradient(90deg, var(--blue-main) 0%, var(--blue-dark) 100%);
      color: #fff;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .header-left .logo {
      height: 70px;
    }

    .header-left .text h1 {
      margin: 0;
      font-size: 1.9rem;
      font-weight: 700;
      color: var(--gold);
    }

    .header-left .text p {
      margin: 3px 0 0 0;
      font-size: 1rem;
      color: var(--text-light);
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 14px;
      font-size: 0.95rem;
    }

    #auth-status {
      background: rgba(255,255,255,0.1);
      padding: 6px 12px;
      border-radius: 8px;
      color: var(--gold);
      font-weight: 600;
    }

    main {
      max-width: 1100px;
      margin: 0 auto;
      padding: 50px 20px;
    }

    .hero-section {
      text-align: center;
      margin-bottom: 40px;
    }

    .hero-section h2 {
      font-size: 2rem;
      color: var(--blue-main);
      margin-bottom: 10px;
    }

    .hero-section p {
      max-width: 720px;
      margin: 0 auto 30px;
      line-height: 1.6;
      color: #4a453f;
    }

    /* ---- Horizontal layout for buttons + auth ---- */
    .hero-actions {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 40px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .track-buttons {
      display: flex;
      flex-direction: column;
      gap: 16px;
      flex: 0 1 280px;
    }

    .track-buttons a {
      display: block;
      padding: 22px 0;
      font-size: 1.1rem;
      font-weight: 600;
      text-decoration: none;
      color: #fff;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.15);
      transition: transform 0.2s, background 0.2s;
    }

    .track-buttons a:hover {
      transform: translateY(-3px);
    }

    .ad-btn { background: var(--blue-main); }
    .ast-btn { background: #ff8c00; }
    .jpp-btn { background: #28a745; }

    .auth-box {
      background: #ffffff;
      padding: 22px 24px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      display: flex;
      flex-direction: column;
      gap: 10px;
      flex: 0 1 320px;
      text-align: left;
    }

    .auth-box input {
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      width: 100%;
      box-sizing: border-box;
      font-family: inherit;
      font-size: 0.95rem;
    }

    .auth-row {
      display: flex;
      gap: 8px;
    }

    .auth-btn {
      flex: 1;
      padding: 10px;
      font-weight: 600;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: var(--blue-main);
      color: #fff;
      font-family: inherit;
      transition: background 0.2s, transform 0.2s;
    }

    .auth-btn:hover {
      transform: translateY(-2px);
      background: var(--blue-dark);
    }

    .auth-btn.secondary {
      background: var(--gold);
      color: var(--text-dark);
    }

    .auth-btn.signout {
      background: #d9534f;
    }

    .resource-list {
      display: grid;
      gap: 12px;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      margin-top: 40px;
    }

    .resource-card {
      background: #fff;
      padding: 16px;
      border-radius: 10px;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.06);
      border-left: 4px solid var(--blue-main);
    }

    .resource-card h4 {
      margin: 0 0 6px 0;
      color: var(--blue-main);
      font-weight: 600;
    }

    .small-muted {
      font-size: 0.95rem;
      color: #6b665f;
    }

    /* ---- Collapsible install section ---- */
    .install-section {
      max-width: 800px;
      margin: 60px auto 0;
      text-align: center;
    }

    .toggle-install {
      background: var(--blue-main);
      color: #fff;
      font-size: 1rem;
      font-weight: 600;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s, transform 0.2s;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .toggle-install:hover {
      background: var(--blue-dark);
      transform: translateY(-2px);
    }

    .install-content {
      overflow: hidden;
      max-height: 0;
      opacity: 0;
      transition: all 0.4s ease;
      background: var(--blue-light);
      border-radius: 12px;
      margin-top: 20px;
      padding: 0 25px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .install-content h3 {
      color: var(--blue-main);
      margin-top: 20px;
    }

    .install-content ol {
      text-align: left;
      margin: 20px auto;
      max-width: 600px;
      color: #333;
    }

    footer {
      text-align: center;
      padding: 16px 20px;
      color: #4a453f;
      font-size: 0.9rem;
      margin-top: 50px;
    }

    @media (max-width: 800px) {
      .hero-actions {
        flex-direction: column;
        align-items: center;
      }
      .track-buttons, .auth-box {
        width: 100%;
        max-width: 320px;
      }
    }
  </style>

  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDVv0Ag4-i3h0bEEYOiX4pRCZF7a4_a220",
      authDomain: "eureka-63b47.firebaseapp.com",
      projectId: "eureka-63b47",
      storageBucket: "eureka-63b47.firebasestorage.app",
      messagingSenderId: "655168214317",
      appId: "1:655168214317:web:3d3ffc07706ba39efa6fa4",
      measurementId: "G-KFTB45DCFZ"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    window.welcomeAuth = { auth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged };
  </script>
</head>

<body>
  <header>
    <div class="header-left">
      <img class="logo" src="eci-icon.png" alt="EUreka logo">
      <div class="text">
        <h1>EUreka!</h1>
        <p>Empowering EU candidates for success</p>
      </div>
    </div>
    <div class="header-right">
      <div id="auth-status">Not signed in</div>
    </div>
  </header>

  <main>
    <section class="hero-section">
      <h2>Welcome to EUreka!</h2>
        <p>
          Prepare for European Commission competitions with short practice modules
          (Knowledge, Competencies, Motivation) and a timed Mock Exam.
        </p>
        
        <p>
          This study tool was developed by an <strong>AD5 competition laureate</strong>,
          born out of the need to practise oral exam questions with timers and under
          real exam conditions. What started as a personal preparation tool evolved
          into this platform, bringing together practice exercises, key sources of
          information, and curated study materials to help future candidates prepare
          effectively and perform at their best in European Commission internal
          competitions.
        </p>
        
        <p>
          Choose your competition track below to start practising!
        </p>
      <div class="hero-actions">
        <div class="track-buttons">
          <a class="ad-btn" href="ad/index.html">AD5/6</a>
          <a class="ast-btn" href="ast/index.html">AST(TBD)</a>
          <a class="jpp-btn" href="JPP/index.html">JPP(same as AD5)</a>
        </div>

        <div class="auth-box">
          <input id="email" type="email" placeholder="Email" />
          <input id="password" type="password" placeholder="Password" />
          <div class="auth-row">
            <button id="signInBtn" class="auth-btn">Sign in</button>
            <button id="registerBtn" class="auth-btn secondary">Register</button>
          </div>
          <button id="signOutBtn" class="auth-btn signout" style="display:none">Sign out</button>
          <div id="user-email" style="font-weight:600; margin-top:6px;"></div>
          <div id="auth-message" class="small-muted"></div>
        </div>
      </div>
    </section>

    <section>
      <h3 style="color:var(--blue-main);">What EUreka! Provides</h3>
      <div class="resource-list">
        <div class="resource-card">
          <h4>Practice Modules</h4>
          <div class="small-muted">Knowledge, Competencies, Motivation ‚Äî short timed prompts for practice.</div>
        </div>
        <div class="resource-card">
          <h4>Mock Exam</h4>
          <div class="small-muted">Simulated multi-stage exam with timers and self-assessment submission.</div>
        </div>
        <div class="resource-card">
          <h4>Progress Tracking</h4>
          <div class="small-muted">Logged-in users can submit self-assessments, tracked per competition track.</div>
        </div>
        <div class="resource-card">
          <h4>How to Use</h4>
          <div class="small-muted">Sign in, pick a competition track, practice regularly, and use the Mock Exam to simulate real timing.</div>
        </div>
      </div>
    </section>

    <!-- Install Instructions -->
    <section class="install-section">
      <button class="toggle-install">üì± Show ‚ÄúHow to Install EUreka!‚Äù</button>
      <div class="install-content">
        <h3>How to Install EUreka! as an App</h3>
        <ol>
          <li>On your <strong>computer</strong> or <strong>mobile browser</strong>, open <em>EUreka!</em>.</li>
          <li>Look for the ‚ÄúInstall‚Äù or ‚ÄúAdd to Home Screen‚Äù option in your browser‚Äôs menu.</li>
          <li>On <strong>iPhone (Safari)</strong>: tap <strong>Share ‚Üí Add to Home Screen</strong>.</li>
          <li>On <strong>Android (Chrome)</strong>: tap <strong>‚ãÆ ‚Üí Install App</strong>.</li>
          <li>Once installed, launch it from your home screen just like a normal app!</li>
        </ol>
      </div>
    </section>
  </main>

  <footer>
    <p>
      ¬© 2026 EUreka! |
      <a href="contact.html">Contact</a> |
      <a href="disclaimer.html">Disclaimer</a>
    </p>
  </footer>

  <script>
    // Collapsible install section
    const installBtn = document.querySelector('.toggle-install');
    const installContent = document.querySelector('.install-content');
    let installVisible = false;

    installBtn.addEventListener('click', () => {
      installVisible = !installVisible;
      installContent.style.maxHeight = installVisible ? installContent.scrollHeight + 'px' : '0';
      installContent.style.opacity = installVisible ? '1' : '0';
      installBtn.textContent = installVisible
        ? 'üì± Hide ‚ÄúHow to Install EUreka!‚Äù'
        : 'üì± Show ‚ÄúHow to Install EUreka!‚Äù';
    });
  </script>

  <!-- Firebase Auth logic -->
  <script type="module">
    const { auth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged } = window.welcomeAuth;
    const emailEl = document.getElementById('email');
    const pwEl = document.getElementById('password');
    const signInBtn = document.getElementById('signInBtn');
    const registerBtn = document.getElementById('registerBtn');
    const signOutBtn = document.getElementById('signOutBtn');
    const authMessage = document.getElementById('auth-message');
    const authStatus = document.getElementById('auth-status');
    const userEmailEl = document.getElementById('user-email');

    signInBtn.addEventListener('click', async () => {
      authMessage.textContent = '';
      const email = emailEl.value.trim(), password = pwEl.value;
      if (!email || !password) { authMessage.textContent = 'Enter email and password.'; return; }
      try { 
        await signInWithEmailAndPassword(auth, email, password); 
        authMessage.textContent = 'Signed in.'; 
        emailEl.value = ''; pwEl.value = ''; 
      } catch (err) { authMessage.textContent = 'Sign in: ' + err.message; }
    });

    registerBtn.addEventListener('click', async () => {
      authMessage.textContent = '';
      const email = emailEl.value.trim(), password = pwEl.value;
      if (!email || !password) { authMessage.textContent = 'Enter email and password.'; return; }
      try { 
        await createUserWithEmailAndPassword(auth, email, password); 
        authMessage.textContent = 'Account created and signed in.'; 
        emailEl.value = ''; pwEl.value = ''; 
      } catch (err) { authMessage.textContent = 'Register: ' + err.message; }
    });

    signOutBtn.addEventListener('click', async () => {
      try { await signOut(auth); authMessage.textContent = 'Signed out.'; } 
      catch (err) { authMessage.textContent = 'Sign out error.'; }
    });

    onAuthStateChanged(auth, user => {
      if (user) {
        authStatus.textContent = 'Signed in';
        userEmailEl.textContent = user.email || '';
        signOutBtn.style.display = 'inline-block';
      } else {
        authStatus.textContent = 'Not signed in';
        userEmailEl.textContent = '';
        signOutBtn.style.display = 'none';
      }
    });
  </script>

  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
        .then(() => console.log('Service Worker registered for homepage'))
        .catch(err => console.error('Service Worker registration failed:', err));
    }
  </script>
</body>
</html>
